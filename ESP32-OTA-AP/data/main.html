<!DOCTYPE html>
<html>
<head>
  <title>Soil Moisture Control</title>
  <style>
    /* Add your custom styles here */
  </style>
</head>
<body>
  <h1>Soil Moisture Control</h1>
  <p>Soil Moisture: <span id="moisture">Loading...</span></p>
  <button onclick="openValve()">Open Valve</button>
  <button onclick="closeValve()">Close Valve</button>
  <br>
  <button onclick="location.href='/upload'">Update Firmware</button>
  
  <script>
    function openValve() {
      fetch('/open')
        .then(response => response.text())
        .then(result => console.log(result));
    }
    
    function closeValve() {
      fetch('/close')
        .then(response => response.text())
        .then(result => console.log(result));
    }
    
    function updateMoisture(value) {
      document.getElementById('moisture').textContent = value;
    }
    
    function fetchMoisture() {
      fetch('/moisture')
        .then(response => response.text())
        .then(result => updateMoisture(result));
    }
    
    setInterval(fetchMoisture, 5000); // Update moisture reading every 5 seconds
    fetchMoisture(); // Initial fetch
  </script>
</body>
</html>
